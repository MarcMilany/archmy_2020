Как полностью удалить пакет вместе с зависимостями в Arch Linux (а также Manjaro и BlackArch)

https://blackarch.ru/?p=1313

Опубликовано в 13.02.2021 от Alexey
В данной инструкции в качестве программы для управления пакетами (удаления) используется pacman, но вместо неё вы также можете использовать и pikaur или yay, поскольку рассматриваемые опции одинаковые для всех данных менеджеров пакетов.

Типичная команда для удаления программы, которая удалит все файлы пакета:

1
sudo pacman -R ПАКЕТ
Она действительно удалит указанный пакет, но при этом останутся конфигурационные файлы пакета, которые будут переименованы — добавлено расширение .pacsave, а также останутся зависимости, которые были установлены для данного пакета.

Чтобы полностью удалить программу вместе со всеми зависимостями и не сохраняя конфигурационные файлы, используйте команду вида:

1
sudo pacman -Rscun ПАКЕТ


В этой команде используются следующие опции:

-c, —cascade

Удалить все целевые пакеты, а также все пакеты, которые зависят от одного или более целевых пакетов. Эта операция рекурсивна и должна использоваться осторожна, поскольку она может удалить много потенциально нужных пакетов.

-n, —nosave

Инструктирует pacman игнорировать резервные копии конфигурационных файлов. Обычно, когда файл удаляется из системы, по базе данных проверяется, должен ли конфигурационный файл быть переименован (к нему добавляется расширение .pacsave). При использовании данной опции, это не происходит — конфигурационные файлы полностью удаляются.

-s, —recursive

Удаляет каждую указанную цель, включая все её зависимости, при условии, что: (A) они не требуются другими пакетами; и (B) они не были установлены явно установлены пользователем. Эта операция рекурсивна и аналогична обратной операции —sync, и это помогает хранить систему в чистоте без сироток. Если вы хотите пропустить условие (B), напишите опцию дважды.

-u, —unneeded

Удаляет цели, которые не требуются другими пакетами. Это преимущественно полезно при удалении группы без использования опции -c чтобы избежать поломки любых зависимостей.